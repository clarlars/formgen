<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <!--
      <script type="text/javascript" src="/default/system/js/odkCommon.js"></script>
    -->
    <script type="text/javascript" src="/default/system/js/odkData.js"></script>
    <script>
      var S4 = function S4() {
	  return (((1+Math.random())*0x10000)|0).toString(16).substring(1); 
      }
      var newGuid = function newGuid() {
	  return (S4() + S4() + "-" + S4() + "-4" + S4().substr(0,3) + "-" + S4() + "-" + S4() + S4() + S4()).toLowerCase();
      }
      var add = function() {
	document.location.href = "/default/config/assets/formgen/refrigerators#" + newGuid();
      }
      var ol = function ol() {
	var list = document.getElementById("list");
	odkData.arbitraryQuery("refrigerators", "SELECT * FROM refrigerators;", [], 1000, 0, function(d) {
	  for (var i = 0; i < d.getCount(); i++) {
	    var span = document.createElement("span");
	    span.innerText = d.getData(i, "refrigerator_id");
	    var edit = document.createElement("button");
	    edit.innerText = "Edit";
	    edit.addEventListener("click", function() {
	      document.location.href = "/default/config/assets/formgen/refrigerators#" + d.getData(i, "_id");
	    });
	    span.appendChild(edit);
	    //span.appendChild(document.createElement("br"));
	    span.style.width = "100%";
	    list.appendChild(span);
	  }
	}, function(d) {
	  alert("Failure! " + d);
	});
      }
    </script>
  </head>
  <body onLoad="ol();">
    <div id="header">Refrigerators<button onClick='add();'>Add</button></div>
    <div id="list"></div>
  </body>
</html>
